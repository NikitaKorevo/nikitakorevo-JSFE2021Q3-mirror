(()=>{"use strict";const t=class{constructor(){this.title="Art Quiz"}render(){const t=document.createElement("h1");return t.classList.add("titleH1"),t.textContent=this.title,t.addEventListener("click",(()=>{window.location.hash=""})),t}},e=document.createElement("header");e.classList.add("header");class s{render(){for(;e.firstChild;)e.removeChild(e.firstChild);const s=(new t).render();s.addEventListener("click",(()=>{window.location.hash=""}));const n=document.createElement("img");n.classList.add("settings"),n.src="./assets/svg/settings.svg";const a=document.createElement("img");switch(a.classList.add("categories"),a.src="./assets/svg/categories.svg",a.addEventListener("click",(()=>{const t=window.location.hash.slice(0,window.location.hash.indexOf("/"));"#ArtistsQuiz"===t&&(window.location.hash="ArtistsQuiz/categories/"),"#PicturesQuiz"===t&&(window.location.hash="PicturesQuiz/categories/")})),window.location.hash){case"":e.append(n);break;default:e.append(s,n);break;case"#ArtistsQuiz/categories/questions/":case"#ArtistsQuiz/score/":case"#PicturesQuiz/categories/questions/":case"#PicturesQuiz/score/":e.append(s,a,n)}return e}}window.addEventListener("hashchange",(()=>{(new s).render()}));const n=s,a=class{constructor(t=""){this.text=t}render(){const t=document.createElement("button");return t.classList.add("button"),t.textContent=this.text,t}},o=class{constructor(t){this.title=t}render(){const t=document.createElement("h2");return t.classList.add("titleH2"),t.textContent=this.title,t}},c=class{constructor(t,e,s){this.subTitle=t,this.indexImg=e,this.numRound=s}render(){const t=document.createElement("div");t.classList.add("card"),t.dataset.numRound=this.numRound,t.dataset.indexImg=this.indexImg;const e=document.createElement("h3");e.classList.add("card__subTitle"),e.textContent=this.subTitle;const s=document.createElement("span");s.classList.add("card__num-completed");let n={};localStorage.getItem("answers")&&(n=JSON.parse(localStorage.getItem("answers"))),n[this.numRound]&&(s.textContent=`${n[this.numRound].filter((t=>t)).length} / 10`);const a=document.createElement("div");a.classList.add("card__text-container"),a.append(e,s);const o=document.createElement("img");o.classList.add("card__img"),o.src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${this.indexImg}.jpg`;const c=document.createElement("div");return c.classList.add("card__img-container"),c.append(o),t.append(a,c),t}};let r=null,i=[],d=null,l=[];const u=[];let m=[],h=[],g=[];(async()=>{const t=await fetch("./assets/json/data.json"),e=await t.json();r=e})();let p=null;(async()=>{const t=await fetch("./assets/json/data.json"),e=await t.json();p=e})();let _=null,w=[],L=null,v=[];const q=[];let E=[];const S=[];let z=[],f=[];(async()=>{const t=await fetch("./assets/json/data.json"),e=await t.json();_=e,console.log(_)})();const y=document.createElement("main");y.classList.add("main");class b{render(){for(;y.firstChild;)y.removeChild(y.firstChild);const e=new class{render(){const e=document.createElement("div");e.classList.add("general");const s=new a("Artists quiz").render();s.classList.add("button-artist");const n=new a("Pictures quiz").render();n.classList.add("button-pictures");const o=(new t).render();return e.append(o,s,n),s.addEventListener("click",(()=>{window.location.hash="ArtistsQuiz/categories/",localStorage.setItem("hash","ArtistsQuiz/categories/")})),n.addEventListener("click",(()=>{window.location.hash="PicturesQuiz/categories/",localStorage.setItem("hash","PicturesQuiz/categories/")})),e}},s=new class{constructor(){this.nameSections=["Portrait","Landscape","Still Life","Graphic","Antique","Avant-Garde","Renaissance","Surrealism","Kitsch","Minimalism","Avangard","Industrial"]}generatingQuestions(t){document.querySelector(".main").append(new class{constructor(t){this.numRound=+t,console.log(t)}randomNum(t,e){return Math.round(Math.random()*(t-e)+e)}makeContent(){i=[],l=[],m=[],h=[],g=[];for(let t=10*this.numRound;l.length<10;t+=1)i.push(r[t].imageNum),l.push(r[t].author),u.push(r[t].author);for(;m.length<30;){const t=this.randomNum(0,r.length-1),e=l.includes(r[t].author),s=m.includes(r[t].author);e||s||m.push(r[t].author)}}render(){window.location.hash="ArtistsQuiz/categories/questions/";const t=document.querySelector(".main");t.firstChild&&t.removeChild(t.firstChild),this.makeContent();const e=document.createElement("div");e.classList.add("artists-quiz-questions");const s=document.createElement("p");s.classList.add("artists-quiz-questions__title"),s.textContent="Кто автор данной картины?",document.createElement("div").classList.add("artists-quiz-questions__img-container");const n=document.createElement("img");n.classList.add("artists-quiz-questions__img"),[d]=i,console.log(`currentPicture ${d}`),n.src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${i.shift()}.jpg`;const o=document.createElement("div");o.classList.add("artists-quiz-questions__buttons-container");const c=document.createElement("div");c.classList.add("artists-quiz-questions__buttons-container");const r=this.randomNum(0,3);console.log(`randomNumButton ${r}`);for(let t=0;t<4;t+=1){const e=new a("").render();e.classList.add("artists-quiz-questions__button"),e.dataset.numButton=t,t===r&&(h.push(t),e.textContent=l.shift()),t!==r&&(e.textContent=m.shift()),t<2?o.append(e):c.append(e)}const u=document.createElement("div");return u.classList.add("artists-quiz-questions__navigation"),u.append(o,c),e.append(s,n,u),u.addEventListener("click",(t=>{t.target.classList.contains("artists-quiz-questions__button")&&(+t.target.dataset.numButton===h[h.length-1]?(g.push(!0),t.target.classList.add("artists-quiz-questions__button--right")):(g.push(!1),t.target.classList.add("artists-quiz-questions__button--wrong")),this.renderModal(t))})),e}renderModal(t){const e=document.querySelector(".wrapper"),s=document.createElement("div");s.classList.add("artists-quiz-questions__modal");const n=document.createElement("div");n.classList.add("modal__content");const o=document.createElement("img");o.classList.add("modal__right-or-wrong");const c=document.createElement("img");c.classList.add("modal__picture");const r=document.createElement("h5");r.classList.add("modal__name-picture");const i=document.createElement("h4");i.classList.add("modal__author-picture");const d=new a("Next").render();return d.classList.add("modal__next"),d.addEventListener("click",(()=>{s.style.display="none",0!==l.length?(s.remove(),this.nextImg(t)):this.openCongratulation(),t.target.classList="button artists-quiz-questions__button"})),n.append(o,c,r,i,d),s.append(n),e.append(s),this.openModal(t),n}openCongratulation(){this.saveAnswersInLocalStorage();const t=document.querySelector(".modal__content");for(;t.firstChild;)t.removeChild(t.firstChild);const e=document.createElement("img");e.classList.add("modal__img-congratulation"),e.src="./assets/svg/grandresult.svg";const s=document.createElement("h6");s.classList.add("modal__text-congratulation"),s.textContent="Congratulations!";const n=document.createElement("span");n.classList.add("modal__numbers-congratulation"),n.textContent=`\n    ${g.filter((t=>t)).length}/${g.length}\n    `;const o=new a("Home").render();o.classList.add("modal__button-home");const c=new a("Next Quiz").render();c.classList.add("modal__button-next-quiz");const r=document.createElement("div");r.classList.add("modal__buttons-container"),r.append(o,c),t.append(e,s,n,r);const i=document.querySelector(".artists-quiz-questions__modal");i.style.display="block",o.addEventListener("click",(()=>{i.style.display="none",window.location.hash="",i.remove()})),c.addEventListener("click",(()=>{i.style.display="none",window.location.hash="ArtistsQuiz/categories/",i.remove()}))}openModal(){console.log(g);const t=document.querySelector(".modal__right-or-wrong");g[g.length-1]?t.src="./assets/svg/right.svg":t.src="./assets/svg/wrong.svg",document.querySelector(".modal__picture").src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${d}.jpg`,document.querySelector(".modal__name-picture").textContent=r[d].name,document.querySelector(".modal__author-picture").textContent=`${r[d].author}, ${r[d].year}`,document.querySelector(".artists-quiz-questions__modal").style.display="block"}nextImg(){[d]=i,console.log(`currentPicture ${d}`),document.querySelector(".artists-quiz-questions__img").src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${i.shift()}.jpg`;const t=document.querySelectorAll(".artists-quiz-questions__button"),e=this.randomNum(0,3);t.forEach(((s,n)=>{n===e?(t[n].textContent=l.shift(),h.push(n)):t[n].textContent=m.shift()})),console.log(h)}saveAnswersInLocalStorage(){let t={};localStorage.getItem("answers")&&(t=JSON.parse(localStorage.getItem("answers"))),t[this.numRound]=g,localStorage.setItem("answers",JSON.stringify(t))}}(t).render())}render(){const t=JSON.parse(localStorage.getItem("answers")),e=document.createElement("div");e.classList.add("artists-quiz");const s=new o("Categories Artists Quiz").render(),n=document.createElement("div");n.classList.add("cards");for(let e=0;e<120;e+=10){const s=new c(this.nameSections[Math.ceil(e/10)],e,Math.ceil(e/10)).render();t[e/10]||s.classList.add("card__img--black"),n.append(s)}return e.append(s,n),e.addEventListener("click",(t=>{if(t.target.closest(".card__num-completed")){const{numRound:e}=t.target.closest(".card").dataset;localStorage.setItem("numRoundForScore",e),window.location.hash="ArtistsQuiz/score/"}t.target.closest(".card__img")&&this.generatingQuestions(t.target.closest(".card").dataset.numRound)})),e}},n=new class{constructor(){this.numRound=localStorage.getItem("numRoundForScore")}render(){const t=document.querySelector(".main");t.firstChild&&t.removeChild(t.firstChild);const e=document.createElement("div");e.classList.add("score");const s=JSON.parse(localStorage.getItem("answers"));for(let t=10*this.numRound,n=0;t<10*this.numRound+10;t+=1,n+=1){const a=new c("",t,this.numRound).render();a.querySelector(".card__text-container").remove(),s[this.numRound][n]||a.classList.add("card__img--black"),e.append(a)}return e.addEventListener("click",(t=>this.renderModal(t))),e}renderModal(t){const e=document.querySelector(".wrapper"),s=document.createElement("div");s.classList.add("score__modal"),s.style.display="block";const n=document.createElement("div");n.classList.add("modal__content");const a=t.target.closest(".card").dataset.indexImg,o=document.createElement("img");o.classList.add("modal__picture"),o.src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${a}.jpg`;const c=document.createElement("h5");c.classList.add("modal__name-picture"),c.textContent=p[a].name;const r=document.createElement("h4");r.classList.add("modal__author-picture"),r.textContent=`${p[a].author}, ${p[a].year}`;const i=document.createElement("button");return i.classList.add("modal__next"),i.textContent="Закрыть",i.addEventListener("click",(()=>{s.style.display="none",s.remove()})),n.append(o,c,r,i),s.append(n),e.append(s),n}},b=new class{constructor(){this.nameSections=["Portrait","Landscape","Still Life","Graphic","Antique","Avant-Garde","Renaissance","Surrealism","Kitsch","Minimalism","Avangard","Industrial"]}generatingQuestions(t){document.querySelector(".main").append(new class{constructor(t){this.numRound=+t,console.log(t)}randomNum(t,e){return Math.round(Math.random()*(t-e)+e)}makeContent(){w=[],v=[],E=[],z=[],f=[];for(let t=10*this.numRound;v.length<10;t+=1)w.push(_[t].imageNum),v.push(_[t].author),q.push(_[t].author);for(console.log(v);E.length<30;){const t=this.randomNum(0,_.length-1),e=v.includes(_[t].author),s=E.includes(_[t].author);e||s||(E.push(_[t].author),S.push(t))}}render(){window.location.hash="PicturesQuiz/categories/questions/";const t=document.querySelector(".main");t.firstChild&&t.removeChild(t.firstChild),this.makeContent();const e=document.createElement("div");e.classList.add("pictures-quiz-questions");const s=document.createElement("p");s.classList.add("pictures-quiz-questions__title"),s.textContent=`Какую картину написал ${v.shift()}?`,[L]=w;const n=document.createElement("div");n.classList.add("pictures-quiz-questions__buttons-container");const a=document.createElement("div");a.classList.add("pictures-quiz-questions__buttons-container");const o=this.randomNum(0,3);console.log(`randomNumButton ${o}`);for(let t=0;t<4;t+=1){const e=document.createElement("div");e.classList.add("pictures-quiz-questions__img-container");const s=document.createElement("img");s.classList.add("pictures-quiz-questions__button"),e.append(s),s.dataset.numButton=t,t===o&&(z.push(t),v.shift(),s.src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${w.shift()}.jpg`),t!==o&&(E.shift(),s.src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${S.shift()}.jpg`),t<2?n.append(e):a.append(e)}const c=document.createElement("div");return c.classList.add("pictures-quiz-questions__navigation"),c.append(n,a),e.append(s,c),c.addEventListener("click",(t=>{t.target.classList.contains("pictures-quiz-questions__button")&&this.renderModal(t)})),e}renderModal(t){const e=document.querySelector(".wrapper"),s=document.createElement("div");s.classList.add("artists-quiz-questions__modal");const n=document.createElement("div");n.classList.add("modal__content");const o=document.createElement("img");o.classList.add("modal__right-or-wrong");const c=document.createElement("img");c.classList.add("modal__picture");const r=document.createElement("h5");r.classList.add("modal__name-picture");const i=document.createElement("h4");i.classList.add("modal__author-picture");const d=new a("Next").render();return d.classList.add("modal__next"),d.textContent="Next",d.addEventListener("click",(()=>{s.style.display="none",f.length<10?(s.remove(),this.nextImg(t)):this.openCongratulation()})),n.append(o,c,r,i,d),s.append(n),e.append(s),this.openModal(t),n}openCongratulation(){this.saveAnswersInLocalStorage();const t=document.querySelector(".modal__content");for(;t.firstChild;)t.removeChild(t.firstChild);const e=document.createElement("img");e.classList.add("modal__img-congratulation"),e.src="./assets/svg/grandresult.svg";const s=document.createElement("h6");s.classList.add("modal__text-congratulation"),s.textContent="Congratulations!";const n=document.createElement("span");n.classList.add("modal__numbers-congratulation"),n.textContent=`\n    ${f.filter((t=>t)).length}/${f.length}\n    `;const o=new a("Home").render();o.classList.add("modal__button-home");const c=new a("Next Quiz").render();c.classList.add("modal__button-next-quiz");const r=document.createElement("div");r.classList.add("modal__buttons-container"),r.append(o,c),t.append(e,s,n,r);const i=document.querySelector(".artists-quiz-questions__modal");i.style.display="block",o.addEventListener("click",(()=>{i.style.display="none",window.location.hash="",i.remove()})),c.addEventListener("click",(()=>{i.style.display="none",window.location.hash="PicturesQuiz/categories/",i.remove()}))}openModal(t){+t.target.dataset.numButton===z[z.length-1]?f.push(!0):f.push(!1),console.log(f);const e=document.querySelector(".modal__right-or-wrong");f[f.length-1]?e.src="./assets/svg/right.svg":e.src="./assets/svg/wrong.svg",document.querySelector(".modal__picture").src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${L}.jpg`,document.querySelector(".modal__name-picture").textContent=_[L].name,document.querySelector(".modal__author-picture").textContent=`${_[L].author}, ${_[L].year}`,document.querySelector(".artists-quiz-questions__modal").style.display="block"}nextImg(){L=`${w[0]}`,document.querySelector(".pictures-quiz-questions__title").textContent=`Какую картину написал ${_[L].author}?`;const t=document.querySelectorAll(".pictures-quiz-questions__button"),e=this.randomNum(0,3);t.forEach(((s,n)=>{n===e?(v.shift(),z.push(n),t[n].src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${w.shift()}.jpg`):(E.shift(),t[n].src=`https://raw.githubusercontent.com/NikitaKorevo/image-data/master/img/${S.shift()}.jpg`)})),console.log(z)}saveAnswersInLocalStorage(){let t={};localStorage.getItem("answers")&&(t=JSON.parse(localStorage.getItem("answers"))),t[this.numRound]=f,localStorage.setItem("answers",JSON.stringify(t))}}(t).render())}render(){const t=JSON.parse(localStorage.getItem("answers")),e=document.createElement("div");e.classList.add("pictures-quiz");const s=new o("Categories Pictures Quiz").render(),n=document.createElement("div");n.classList.add("cards");for(let e=120,s=0;e<240;e+=10,s+=1){const a=new c(this.nameSections[s],e,Math.ceil(e/10)).render();t[e/10]||a.classList.add("card__img--black"),n.append(a)}return e.append(s,n),e.addEventListener("click",(t=>{if(t.target.closest(".card__num-completed")){const{numRound:e}=t.target.closest(".card").dataset;localStorage.setItem("numRoundForScore",e),window.location.hash="PicturesQuiz/score/"}t.target.closest(".card__img")&&this.generatingQuestions(t.target.closest(".card").dataset.numRound)})),e}};switch(window.location.hash){case"":console.log("1"),y.append(e.render());break;case"#ArtistsQuiz/categories/":console.log("2"),y.append(s.render());break;case"#ArtistsQuiz/score/":case"#PicturesQuiz/score/":setTimeout((()=>{y.append(n.render())}),0);break;case"#PicturesQuiz/categories/":console.log("3"),y.append(b.render());break;default:window.location.hash=""}return y}}window.addEventListener("hashchange",(()=>{console.log(window.location.hash),"#ArtistsQuiz/categories/questions/"!==window.location.hash&&"#PicturesQuiz/categories/questions/"!==window.location.hash&&((new b).render(),console.log("Hash change!"))}));const C=b,x=document.createElement("footer");x.classList.add("footer");const k=document.getElementById("root"),N=new class{constructor(){this.title="title",this.h2=document.createElement("h2")}render(){const t=document.createElement("div");t.classList.add("wrapper");const e=new n,s=new C("asdf");t.append(e.render(),s.render(),class{static render(){const t=document.createElement("a");t.href="https://rs.school/",t.target="_blank";const e=document.createElement("img");e.classList.add("rsschool"),e.src="./assets/svg/RSSchool320.svg",t.append(e);const s=document.createElement("span");s.classList.add("year"),s.textContent="2021";const n=document.createElement("a");n.href="https://github.com/NikitaKorevo",n.target="_blank";const a=document.createElement("img");return a.classList.add("github"),a.src="./assets/svg/github.svg",n.append(a),x.append(t,s,n),x}}.render()),k.append(t)}};N.render()})();